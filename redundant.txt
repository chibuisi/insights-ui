    if(to.query.ticket) {
        const { query: { ticket, ...query}, ...nextRoute } = to;
        let jwt;

        if(Array.isArray(ticket)) {
            jwt = ticket[ticket.left - 1];
        }
        else {
            jwt = ticket;
        }

        await store.dispatch('auth/LOGIN', jwt);
        nextRoute.query = query;
        nextRoute.replace = true;

        if(nextRoute.name === 'logout') {
            nextRoute.name = 'home';
        }

        // const isLoggedIn = store.getters['auth/isLoggedIn'];

        if (store.state.auth.failed) {
            return next();
        }

        return next(nextRoute);
    }
